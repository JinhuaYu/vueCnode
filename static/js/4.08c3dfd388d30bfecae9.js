webpackJsonp([4],{J7RL:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("4YfN"),n=a.n(e),i=a("aozt"),c=a.n(i),r=a("c9vj"),o=a("9rMa"),l={name:"Messages",data:function(){return{mesgs:{has_read_messages:[],hasnot_read_messages:[]}}},created:function(){this.featchUserMsg()},computed:n()({},Object(o.b)(["accessToken"])),methods:{featchUserMsg:function(){var s=this;c.a.get(r.a.message,{params:{accesstoken:this.accessToken,mdrender:!0}}).then(function(t){t.data.success&&(s.mesgs=t.data.data)})},markAll:function(){var s=this;c.a.post(r.a.markAll,{accesstoken:this.accessToken}).then(function(t){t.data.success&&s.$message.success("全部标记已读")}).catch(function(s){return s})},markOne:function(s){var t=this;c.a.post(""+r.a.markOne+s,{accesstoken:this.accessToken}).then(function(s){s.data.success&&t.$message.success("此消息已读")}).catch(function(s){return s})}}},u={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"container"},[a("Sidebar"),s._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"panel"},[a("div",{staticClass:"head"},[s._v("\n        未读消息\n        "),s.mesgs.hasnot_read_messages.length>1?a("el-button",{staticClass:"pull-right",attrs:{type:"success",size:"small"},on:{click:s.markAll}},[s._v("标记全部已读")]):s._e()],1),s._v(" "),a("div",{staticClass:"body"},[s.mesgs.hasnot_read_messages.length>0?a("ul",{staticClass:"list"},s._l(s.mesgs.hasnot_read_messages,function(t){return a("li",{key:t.id,staticClass:"item"},[a("router-link",{attrs:{to:{name:"User",params:{loginname:t.author.loginname}}}},[s._v(s._s(t.author.loginname))]),s._v("\n            回复了你的话题\n            "),a("router-link",{attrs:{to:{name:"Topic",params:{id:t.topic.id}}},on:{click:function(a){s.markOne(t.id)}}},[s._v(s._s(t.topic.title))])],1)})):a("div",{staticClass:"no-list"},[s._v("\n          无消息\n        ")])])]),s._v(" "),a("div",{staticClass:"panel"},[a("div",{staticClass:"head"},[s._v("已读消息")]),s._v(" "),a("div",{staticClass:"body"},[s.mesgs.has_read_messages.length>0?a("ul",{staticClass:"list"},s._l(s.mesgs.has_read_messages,function(t){return a("li",{key:t.id,staticClass:"item",attrs:{"meg-id":t.id}},[a("router-link",{attrs:{to:{name:"User",params:{loginname:t.author.loginname}}}},[s._v(s._s(t.author.loginname))]),s._v("\n            回复了你的话题\n            "),a("router-link",{attrs:{to:"/topic/"+t.topic.id+"#"+t.reply.id}},[s._v(s._s(t.topic.title))])],1)})):a("div",{staticClass:"no-list"},[s._v("\n          无消息\n        ")])])])])],1)},staticRenderFns:[]};var d=a("vSla")(l,u,!1,function(s){a("O/x8")},null,null);t.default=d.exports},"O/x8":function(s,t){}});
//# sourceMappingURL=4.08c3dfd388d30bfecae9.js.map