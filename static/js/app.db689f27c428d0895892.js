webpackJsonp([7],{CuRo:function(t,s){},HpCc:function(t,s){},LSs0:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("MVMM"),n=e("rVsN"),o=e.n(n),i=e("4YfN"),r=e.n(i),c=e("9rMa"),l={name:"Header",data:function(){return{}},computed:r()({},Object(c.b)(["isLogin","userInfo","noReadMsg"])),methods:{loginDialog:function(t){this.$store.commit("loginDialog",t)},logOut:function(){this.$store.commit("logOut")}}},u={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("header",{staticClass:"navbar"},[e("div",{staticClass:"container"},[e("router-link",{staticClass:"brand",attrs:{to:"/"}},[e("img",{attrs:{src:"http://o4j806krb.qnssl.com/public/images/cnodejs_light.svg",alt:""}})]),t._v(" "),t.isLogin?e("ul",{staticClass:"nav pull-right"},[e("li",[e("el-badge",{staticClass:"item",attrs:{value:t.noReadMsg>0?t.noReadMsg:"",max:99}},[e("router-link",{attrs:{to:"/message"}},[t._v("消息")])],1)],1),t._v(" "),e("li",[e("router-link",{attrs:{to:{name:"User",params:{loginname:t.userInfo.loginname}}}},[t._v("\n          "+t._s(t.userInfo.loginname)+"\n        ")])],1),t._v(" "),e("li",[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(s){t.logOut()}}},[t._v("退出")])],1)]):e("ul",{staticClass:"pull-right"},[e("li",[e("el-button",{attrs:{type:"success",size:"small"},on:{click:function(s){t.loginDialog(!0)}}},[t._v("登录")])],1)])],1)])},staticRenderFns:[]};var d=e("vSla")(l,u,!1,function(t){e("qoJp")},null,null).exports,g={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("footer",{staticClass:"footer"},[s("div",{staticClass:"container"},[s("p",[this._v("© 2018 kjyujinhua@163.com")])])])}]};var p=e("vSla")({},g,!1,function(t){e("oGF2")},null,null).exports,m=e("aozt"),v=e.n(m),f=e("c9vj"),j={name:"Login",data:function(){return{loginForm:{accessToken:window.localStorage.save_access_token||""},rules:{accessToken:[{required:!0,message:"请输入AccessToken",trigger:"blur"}]},errorMsg:""}},computed:r()({},Object(c.b)(["loginDialogStatus"])),methods:{loginDialog:function(t){this.$store.commit("loginDialog",t)},login:function(){var t=this;this.$refs.loginForm.validate(function(s){s&&v.a.post(f.a.login,{accesstoken:t.loginForm.accessToken}).then(function(s){s.data.success&&t.$store.dispatch("login",{accessToken:t.loginForm.accessToken,userInfo:s.data}).then(function(){t.loginDialog(!1),t.$message.success("登录成功")})}).catch(function(s){t.errorMsg="错误的accessToken",console.log(s)})})}}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("el-dialog",{attrs:{title:"登 录",visible:t.loginDialogStatus,width:"40%"},on:{close:function(s){t.loginDialog(!1)}}},[e("el-form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.rules,"status-icon":""}},[e("el-form-item",{attrs:{prop:"accessToken",error:t.errorMsg}},[e("el-input",{attrs:{placeholder:"accessToken",clearable:""},model:{value:t.loginForm.accessToken,callback:function(s){t.$set(t.loginForm,"accessToken","string"==typeof s?s.trim():s)},expression:"loginForm.accessToken"}})],1),t._v(" "),e("el-form-item",[e("a",{attrs:{href:"https://cnodejs.org/setting",target:"_blank"}},[t._v("如何获取Access Token？")])])],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(s){t.login()}}},[t._v("登 录")])],1)],1)},staticRenderFns:[]},k=e("vSla")(j,h,!1,null,null,null).exports,_=e("uNf3"),b=e.n(_),A={name:"App",components:{Header:d,Footer:p,Login:k},data:function(){return{start:!1,end:!1,faild:!1}},created:function(){this.axiosConfig(),this.$store.dispatch("checkLogin")},methods:{loadingStart:function(){this.start=!0},loadingEnd:function(){var t=this;this.end=!0,setTimeout(function(){t.end=t.start=!1},700)},loadingFaild:function(){var t=this;this.faild=!0,setTimeout(function(){t.faild=t.start=!1},700)},axiosConfig:function(){var t=this;v.a.interceptors.request.use(function(s){return t.loadingStart(),s},function(s){return t.loadingFaild(),_.Message.error("API请求失败"),o.a.reject(s)}),v.a.interceptors.response.use(function(s){return t.loadingEnd(),s},function(s){if(t.loadingFaild(),s.response)switch(s.response.status){case 401:_.Message.error("401")}return o.a.reject(s)})},backTop:function(){window.scroll(0,0)}}},C={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("Header"),t._v(" "),e("Login"),t._v(" "),e("keep-alive",{attrs:{exclude:"User, Topic, Messages"}},[e("router-view")],1),t._v(" "),e("Footer"),t._v(" "),e("div",{staticClass:"backTop",on:{click:t.backTop}},[e("i",{staticClass:"el-icon-arrow-up"})]),t._v(" "),e("div",{staticClass:"loading-bar",class:{active:t.start,end:t.end,error:t.faild}},[e("div",{staticClass:"loading-bar-fast"})])],1)},staticRenderFns:[]};var y=e("vSla")(A,C,!1,function(t){e("LSs0")},null,null).exports,w=e("zO6J");a.default.use(w.a);var N=new w.a({routes:[{name:"HomePage",path:"/",component:function(){return e.e(2).then(e.bind(null,"tlXl"))}},{name:"Topic",path:"/topic/:id",component:function(){return e.e(0).then(e.bind(null,"lqbT"))}},{name:"Release",path:"/release/:id",component:function(){return e.e(1).then(e.bind(null,"R0k3"))}},{name:"User",path:"/user/:loginname",component:function(){return e.e(5).then(e.bind(null,"+c0R"))}},{name:"Collect",path:"/collect/:loginname",component:function(){return e.e(3).then(e.bind(null,"WkRL"))}},{name:"Message",path:"/message",component:function(){return e.e(4).then(e.bind(null,"J7RL"))}}]});a.default.use(c.a);var x=new c.a.Store({state:{loginDialogStatus:!1,accessToken:window.localStorage.access_token||"",isLogin:!1,noReadMsg:0,userInfo:{loginname:"",id:"",avatar_url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEX29vYACyOqAAAACklEQVQI12MAAgAABAABINItbwAAAABJRU5ErkJggg=="}},mutations:{loginDialog:function(t,s){t.loginDialogStatus=s},updateLoginStatus:function(t,s){s.accessToken?(window.localStorage.access_token=window.localStorage.save_access_token=t.accessToken=s.accessToken,t.userInfo=s.userInfo):t.userInfo=s,t.isLogin=!0},updateMsgCount:function(t,s){t.noReadMsg=s},logOut:function(t){window.localStorage.removeItem("access_token"),t.accessToken="",t.isLogin=!1,_.Message.success("已退出")},updateCollectCount:function(){}},actions:{login:function(t,s){var e=t.commit,a=t.dispatch;e("updateLoginStatus",s),a("featchNoReadMsgCount",s.accessToken)},checkLogin:function(t){var s=t.state,e=t.dispatch,a=t.commit;s.accessToken&&v.a.post(f.a.login,{accesstoken:s.accessToken}).then(function(t){t.data.success&&(a("updateLoginStatus",t.data),e("featchNoReadMsgCount",s.accessToken))}).catch(function(t){return t})},featchNoReadMsgCount:function(t,s){var e=t.commit;v.a.get(f.a.countNoReadMsg+"?accesstoken="+s).then(function(t){t.data.success&&e("updateMsgCount",t.data.data)}).catch(function(t){return t})}}}),T=e("6ROu"),R=e.n(T),M=e("zdS3"),S=e.n(M),z=(e("UhgQ"),e("nvav"),e("HpCc"),e("uxEr"),e("Qbok"),e("CuRo"),{name:"Sidebar",data:function(){return{}},props:{from:{type:String,default:""},author:{type:Object,default:function(){return{loginname:"--",avatar_url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEX29vYACyOqAAAACklEQVQI12MAAgAABAABINItbwAAAABJRU5ErkJggg=="}}}},computed:r()({},Object(c.b)(["isLogin","userInfo"])),methods:{loginDialog:function(t){this.$store.commit("loginDialog",t)}}}),I={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("aside",{staticClass:"sidebar hidden-sm-and-down"},["Topic"==t.from?e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"head"},[t._v("作者")]),t._v(" "),e("div",{staticClass:"userbox pd-15"},[e("router-link",{staticClass:"userhead",attrs:{to:{name:"User",params:{loginname:t.author.loginname}}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.author.avatar_url,expression:"author.avatar_url"}],attrs:{alt:""}})]),t._v(" "),e("span",{staticClass:"username"},[e("router-link",{attrs:{to:{name:"User",params:{loginname:t.author.loginname}}}},[t._v("\n            "+t._s(t.author.loginname)+"\n          ")])],1),t._v(" "),e("p",{staticClass:"userword"},[t._v("“ 这家伙很懒，什么个性签名都没有留下。 ”")])],1)])]):e("div",[t.isLogin?e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"head"},[t._v("个人信息")]),t._v(" "),e("div",{staticClass:"body"},[e("div",{staticClass:"userbox"},[e("router-link",{staticClass:"userhead",attrs:{to:{name:"User",params:{loginname:t.userInfo.loginname}}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.userInfo.avatar_url,expression:"userInfo.avatar_url"}],attrs:{alt:""}})]),t._v(" "),e("span",{staticClass:"username"},[e("router-link",{attrs:{to:{name:"User",params:{loginname:t.userInfo.loginname}}}},[t._v("\n                "+t._s(t.userInfo.loginname)+"\n              ")])],1),t._v(" "),e("p",{staticClass:"userword"},[t._v("“ 这家伙很懒，什么个性签名都没有留下。 ”")])],1)])]),t._v(" "),e("div",{staticClass:"panel"},[e("div",{staticClass:"body"},[e("router-link",{attrs:{to:"/release/create"}},[e("el-button",{attrs:{type:"success"}},[t._v("发布话题")])],1)],1)])]):e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"head"},[t._v("CNode：Node.js专业中文社区")]),t._v(" "),e("div",{staticClass:"body"},[e("span",[t._v("当前是游客状态，您可以 ")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(s){t.loginDialog(!0)}}},[t._v("登录")])],1)])])])])},staticRenderFns:[]},q=e("vSla")(z,I,!1,null,null,null).exports,U={data:function(){return{}},props:{topics:{type:Array,required:!0}},methods:{tag:function(t){if(t.top)return{text:"置顶",className:"light"};if(t.good)return{text:"精华",className:"light"};switch(t.tab){case"share":return{text:"分享",className:t.tab};case"ask":return{text:"问答",className:t.tab};case"job":return{text:"招聘",className:t.tab};case"dev":return{text:"测试",className:t.tab};default:return{text:"",className:"default"}}}}},D={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"topic-list"},t._l(t.topics,function(s){return e("div",{key:s.id,staticClass:"topic-item"},[e("router-link",{staticClass:"user-avatar",attrs:{to:{name:"User",params:{loginname:s.author.loginname}}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.author.avatar_url,expression:"item.author.avatar_url"}],attrs:{title:s.author.loginname}})]),t._v(" "),s.reply_count||s.visit_count?e("span",{staticClass:"reply-count"},[e("span",{staticClass:"c-reply",attrs:{title:"回复"}},[t._v(t._s(s.reply_count))]),t._v(" "),e("span",[t._v("/")]),t._v(" "),e("span",{staticClass:"c-visit",attrs:{title:"浏览"}},[t._v(t._s(s.visit_count))])]):t._e(),t._v(" "),s.tab?e("span",{staticClass:"tag",class:t.tag(s).className},[t._v(t._s(t.tag(s).text))]):t._e(),t._v(" "),e("router-link",{staticClass:"title",attrs:{to:{name:"Topic",params:{id:s.id}}}},[t._v(t._s(s.title))]),t._v(" "),e("time",{staticClass:"c-time pull-right"},[t._v(t._s(t._f("fromNow")(s.last_reply_at)))])],1)}))},staticRenderFns:[]};var J=e("vSla")(U,D,!1,function(t){e("SYQe")},null,null).exports;a.default.config.productionTip=!1,a.default.use(b.a),a.default.use(S.a,{preLoad:1.3,error:"http://placehold.it/30x30",loading:"http://placehold.it/30x30",attempt:1}),a.default.component("Sidebar",q),a.default.component("List",J),R.a.locale("zh_cn"),a.default.filter("fromNow",function(t){return R()(t).fromNow()}),new a.default({el:"#app",router:N,store:x,components:{App:y},template:"<App/>"})},Qbok:function(t,s){},SYQe:function(t,s){},UhgQ:function(t,s){},c9vj:function(t,s,e){"use strict";s.a={topics:"https://cnodejs.org/api/v1/topics",topicDetail:"https://cnodejs.org/api/v1/topic/",cerateTopic:"https://cnodejs.org/api/v1/topics",updateTopic:"https://cnodejs.org/api/v1/topics/update",topicCollect:"https://cnodejs.org/api/v1/topic_collect/collect",topicDeCollect:"https://cnodejs.org/api/v1/topic_collect/de_collect",userCollection:"https://cnodejs.org/api/v1/topic_collect/",reply:"https://cnodejs.org/api/v1/topic/",like:"https://cnodejs.org/api/v1/reply/",getUser:"https://cnodejs.org/api/v1/user/",login:"https://cnodejs.org/api/v1/accesstoken",countNoReadMsg:"https://cnodejs.org/api/v1/message/count",message:"https://cnodejs.org/api/v1/messages",markAll:"https://cnodejs.org/api/v1/message/mark_all",markOne:"https://cnodejs.org/api/v1/message/mark_one/"}},nvav:function(t,s){},oGF2:function(t,s){},pFZ8:function(t,s,e){var a={"./af":"nqC2","./af.js":"nqC2","./ar":"tHRT","./ar-dz":"2iw2","./ar-dz.js":"2iw2","./ar-kw":"soBb","./ar-kw.js":"soBb","./ar-ly":"zjQ3","./ar-ly.js":"zjQ3","./ar-ma":"11uP","./ar-ma.js":"11uP","./ar-sa":"yM2J","./ar-sa.js":"yM2J","./ar-tn":"k9UU","./ar-tn.js":"k9UU","./ar.js":"tHRT","./az":"H/ZR","./az.js":"H/ZR","./be":"NcWj","./be.js":"NcWj","./bg":"ux43","./bg.js":"ux43","./bm":"SHxi","./bm.js":"SHxi","./bn":"mhJc","./bn.js":"mhJc","./bo":"LyiZ","./bo.js":"LyiZ","./br":"eXAx","./br.js":"eXAx","./bs":"e6JA","./bs.js":"e6JA","./ca":"Nq9b","./ca.js":"Nq9b","./cs":"UHZy","./cs.js":"UHZy","./cv":"A9HL","./cv.js":"A9HL","./cy":"VZG9","./cy.js":"VZG9","./da":"ucoA","./da.js":"ucoA","./de":"crTT","./de-at":"Tz0t","./de-at.js":"Tz0t","./de-ch":"thUw","./de-ch.js":"thUw","./de.js":"crTT","./dv":"3FyJ","./dv.js":"3FyJ","./el":"soCQ","./el.js":"soCQ","./en-au":"dDC6","./en-au.js":"dDC6","./en-ca":"a+lM","./en-ca.js":"a+lM","./en-gb":"M9nR","./en-gb.js":"M9nR","./en-ie":"Mg3b","./en-ie.js":"Mg3b","./en-il":"FnyN","./en-il.js":"FnyN","./en-nz":"k7mD","./en-nz.js":"k7mD","./eo":"jXmb","./eo.js":"jXmb","./es":"6C4d","./es-do":"obsI","./es-do.js":"obsI","./es-us":"6PAY","./es-us.js":"6PAY","./es.js":"6C4d","./et":"vuD1","./et.js":"vuD1","./eu":"u5y6","./eu.js":"u5y6","./fa":"tFrz","./fa.js":"tFrz","./fi":"X+Ax","./fi.js":"X+Ax","./fo":"Rh5s","./fo.js":"Rh5s","./fr":"TOjj","./fr-ca":"ruqB","./fr-ca.js":"ruqB","./fr-ch":"00Y2","./fr-ch.js":"00Y2","./fr.js":"TOjj","./fy":"SRJb","./fy.js":"SRJb","./gd":"0IH4","./gd.js":"0IH4","./gl":"xKUt","./gl.js":"xKUt","./gom-latn":"mXUA","./gom-latn.js":"mXUA","./gu":"KJ90","./gu.js":"KJ90","./he":"Lb8N","./he.js":"Lb8N","./hi":"zKrU","./hi.js":"zKrU","./hr":"c7Tt","./hr.js":"c7Tt","./hu":"nPYQ","./hu.js":"nPYQ","./hy-am":"xP+R","./hy-am.js":"xP+R","./id":"b/5h","./id.js":"b/5h","./is":"NBPu","./is.js":"NBPu","./it":"j638","./it.js":"j638","./ja":"+4ei","./ja.js":"+4ei","./jv":"zTBq","./jv.js":"zTBq","./ka":"0yQz","./ka.js":"0yQz","./kk":"bHch","./kk.js":"bHch","./km":"WKL0","./km.js":"WKL0","./kn":"3YHI","./kn.js":"3YHI","./ko":"Q+Dq","./ko.js":"Q+Dq","./ky":"CcNt","./ky.js":"CcNt","./lb":"M5Vs","./lb.js":"M5Vs","./lo":"o/Sk","./lo.js":"o/Sk","./lt":"cLY9","./lt.js":"cLY9","./lv":"RGDN","./lv.js":"RGDN","./me":"FD3J","./me.js":"FD3J","./mi":"GwqZ","./mi.js":"GwqZ","./mk":"uQI5","./mk.js":"uQI5","./ml":"T6pu","./ml.js":"T6pu","./mn":"yxpo","./mn.js":"yxpo","./mr":"bPiS","./mr.js":"bPiS","./ms":"2OOo","./ms-my":"KSMX","./ms-my.js":"KSMX","./ms.js":"2OOo","./mt":"Nh9e","./mt.js":"Nh9e","./my":"/XOG","./my.js":"/XOG","./nb":"Ae3M","./nb.js":"Ae3M","./ne":"I2Mq","./ne.js":"I2Mq","./nl":"q8N+","./nl-be":"iNpx","./nl-be.js":"iNpx","./nl.js":"q8N+","./nn":"i67k","./nn.js":"i67k","./pa-in":"adWD","./pa-in.js":"adWD","./pl":"+rcL","./pl.js":"+rcL","./pt":"oklR","./pt-br":"gJMY","./pt-br.js":"gJMY","./pt.js":"oklR","./ro":"sk37","./ro.js":"sk37","./ru":"+4Xv","./ru.js":"+4Xv","./sd":"Jt7/","./sd.js":"Jt7/","./se":"oN7S","./se.js":"oN7S","./si":"+QYi","./si.js":"+QYi","./sk":"egU1","./sk.js":"egU1","./sl":"aGJs","./sl.js":"aGJs","./sq":"GtSw","./sq.js":"GtSw","./sr":"KvrN","./sr-cyrl":"maSq","./sr-cyrl.js":"maSq","./sr.js":"KvrN","./ss":"rkEC","./ss.js":"rkEC","./sv":"goqJ","./sv.js":"goqJ","./sw":"C+kv","./sw.js":"C+kv","./ta":"fqly","./ta.js":"fqly","./te":"E4H0","./te.js":"E4H0","./tet":"/++u","./tet.js":"/++u","./tg":"Hw/J","./tg.js":"Hw/J","./th":"OxV8","./th.js":"OxV8","./tl-ph":"26rn","./tl-ph.js":"26rn","./tlh":"ZWUx","./tlh.js":"ZWUx","./tr":"Ygbz","./tr.js":"Ygbz","./tzl":"cYDi","./tzl.js":"cYDi","./tzm":"RfCZ","./tzm-latn":"ZY5v","./tzm-latn.js":"ZY5v","./tzm.js":"RfCZ","./ug-cn":"2gWI","./ug-cn.js":"2gWI","./uk":"II8x","./uk.js":"II8x","./ur":"CREB","./ur.js":"CREB","./uz":"G9HU","./uz-latn":"Swdd","./uz-latn.js":"Swdd","./uz.js":"G9HU","./vi":"gkPr","./vi.js":"gkPr","./x-pseudo":"9yAS","./x-pseudo.js":"9yAS","./yo":"3Xqy","./yo.js":"3Xqy","./zh-cn":"HZyc","./zh-cn.js":"HZyc","./zh-hk":"ITl9","./zh-hk.js":"ITl9","./zh-tw":"RXqC","./zh-tw.js":"RXqC"};function n(t){return e(o(t))}function o(t){var s=a[t];if(!(s+1))throw new Error("Cannot find module '"+t+"'.");return s}n.keys=function(){return Object.keys(a)},n.resolve=o,t.exports=n,n.id="pFZ8"},qoJp:function(t,s){},uxEr:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.db689f27c428d0895892.js.map